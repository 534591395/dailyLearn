<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <title>25对象A直接调用对象B的某个方法</title>
       
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <meta name="description" content="常见面试题" />
        <meta name="keywords" content="常见面试题,javascript" />
        <meta name="author" content="floraLam" />
        <script></script>
    </head>
    <body style = "font-family:'微软雅黑'">
        <h3>25对象A直接调用对象B的某个方法</h3>
       对象A直接调用对象B的某个方法，实现交互逻辑。
       但是导致的问题是A和B紧密耦合，修改B可能导致A调用B的方法失效。

        为了解决耦合导致的问题，我们可以设计成： 
        对象A生成消息 -> 将消息通知给一个消息处理器（Observable）-> 消息处理器将消息传递给B 
        具体的调用过程变成： 
            A.emit(‘message’,data); 
            B.on(‘message’,function(data){}); 
            请实现这一事件消息代理功能 //请将事件消息功能补充完整 function EventEmitter(){}


        <div style = "font-family: '微软雅黑';text-align: center;border: 1px dotted #000;color: #000;margin-top: 30px;padding: 20px 0;position:absolute;bottom:30px;width:98%">请问你可爱的小“F12”，索取答案!</div>
        
	</body>
    <script>
        function EventEmitter() {
            this.eventFunctionMap = {};
        }
        EventEmitter.prototype.emit = function(eventName, data){
            this.eventFunctionMap[eventName].call(this, data);
        }
        EventEmitter.prototype.on = function(eventName, callback) {
            this.eventFunctionMap[eventName] = callback;
        }
        console.info(EventEmitter.prototype);


    </script>
</html>

